// TestApp.cpp : This file contains the 'main' function. Program execution begins and ends there.
//

#include "pch.h"
#include <iostream>

bool WINAPI DisassemblyFile(LPSTR input_file_path, LPSTR asm_file_path, LPSTR output_file_path);
typedef decltype(&DisassemblyFile) FN_DisassemblyFile;


int main()
{
	//"c:\\temp\\Fo3l7eAEM4XDmKyIV9tj.bytes"
	//"c:\\windows\\syswow64\\mspaint.exe"
	std::string inp_file_path_str = "c:\\windows\\syswow64\\mspaint.exe";
	//"c:\\temp\\Fo3l7eAEM4XDmKyIV9tj.asm";
	std::string asm_file_path_str = "";
	std::string out_file_path_str = "c:\\temp\\out.csv";


	HMODULE hLib = LoadLibraryA("NativeLib.dll");
	FN_DisassemblyFile fnDisassemblyFile = (FN_DisassemblyFile)GetProcAddress(hLib, "DisassemblyFile");
	bool result = fnDisassemblyFile((LPSTR)inp_file_path_str.c_str(), (LPSTR)asm_file_path_str.c_str(), (LPSTR)out_file_path_str.c_str());
	
    return 0;
}

// Run program: Ctrl + F5 or Debug > Start Without Debugging menu
// Debug program: F5 or Debug > Start Debugging menu

// Tips for Getting Started: 
//   1. Use the Solution Explorer window to add/manage files
//   2. Use the Team Explorer window to connect to source control
//   3. Use the Output window to see build output and other messages
//   4. Use the Error List window to view errors
//   5. Go to Project > Add New Item to create new code files, or Project > Add Existing Item to add existing code files to the project
//   6. In the future, to open this project again, go to File > Open > Project and select the .sln file
